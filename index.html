<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vin+ web</title>
<style>
body {
  margin:0; font-family:sans-serif; background:#f5f5f5; color:#333;
  display:flex; flex-direction:column; align-items:center; min-height:100vh;
}
.dark-mode { background:#121212; color:#fff; }

header { position:fixed; top:0; width:100%; height:60px; display:flex; justify-content:flex-end; align-items:center; padding:0 16px; background:rgba(255,255,255,0.9); z-index:100; }
.dark-mode header { background:rgba(25,25,25,0.9); }

#settings-toggle { cursor:pointer; font-size:1.5rem; }

#settings {
  position:fixed; top:70px; right:5px; background:#fff; border-radius:12px; padding:12px; width:90%; max-width:280px; display:none; z-index:99;
}
.dark-mode #settings { background:#1f1f1f; color:#fff; }
#settings h4 { margin:0 0 6px 0; }
#settings label { display:block; margin-top:8px; font-size:0.9em; }
#settings input[type="checkbox"] { margin-right:6px; }

.vip-section button { margin-top:6px; width:100%; padding:8px; border-radius:8px; border:none; cursor:pointer; font-weight:600; }
.vip-section button#vip-btn { background:linear-gradient(90deg,gold,orange); color:#fff; }
.vip-section button#favorites-view, .vip-section button#history-view { background:#2f80ed; color:#fff; display:none; }

main { margin-top:70px; width:95%; max-width:400px; display:flex; flex-direction:column; align-items:center; }

.card { display:flex; flex-direction:column; width:100%; background:#fff; border-radius:16px; box-shadow:0 6px 18px rgba(0,0,0,0.08); overflow:hidden; position:relative; transition: transform 0.5s ease, opacity 0.4s ease; }
.dark-mode .card { background:#1f1f1f; }
.card img { width:100%; object-fit:contain; background:#f9f9f9; }
.card .info { padding:12px; display:flex; flex-direction:column; }
.info h2 { font-size:1.1rem; margin:4px 0; }
.info p { font-size:0.9rem; margin:2px 0; }
.price { color:#2f80ed; font-weight:600; margin-top:6px; }

.btns { display:flex; justify-content:center; gap:8px; margin-top:12px; flex-wrap:wrap; }
button { cursor:pointer; padding:8px 16px; border:none; border-radius:10px; font-weight:600; transition:0.2s; font-size:0.9rem; }
button:hover { opacity:0.9; transform:scale(1.03); }
#skip-btn { background:#666; color:#fff; }
#favorite-btn { background:#e74c3c; color:#fff; }
#vinted-btn { background:#27ae60; color:#fff; }

.popup {
  position:fixed; background:#fff; padding:10px; border-radius:12px; width:90%; max-width:300px; display:none; z-index:200;
  top:80px; left:50%; transform:translateX(-50%); box-shadow:0 4px 12px rgba(0,0,0,0.2);
}
.dark-mode .popup { background:#1f1f1f; color:#fff; }
.popup .popup-close { position:absolute; top:6px; right:8px; cursor:pointer; font-weight:bold; font-size:1.2rem; }
.item-list div { display:flex; gap:6px; margin-bottom:6px; align-items:center; font-size:0.85rem; }
.item-list img { width:40px; height:40px; object-fit:cover; border-radius:6px; }

#best-btn {
  position:fixed; top:10px; left:10px; z-index:101; padding:8px 12px; border-radius:8px; border:none; font-weight:bold; cursor:pointer; background:#2f80ed; color:white;
  animation:none;
}
@keyframes blink { 0%,50%,100%{opacity:1} 25%,75%{opacity:0;} }

.card.slide-left { transform:translateX(-120%) rotate(-10deg) scale(0.9); opacity:0; }
.card.zoom-in { transform:scale(1.05); opacity:1; transition:0.5s; }

@media(max-width:400px){ main{width:95%;} .card img{width:100%; height:auto;} }
</style>
</head>
<body>

<header><div id="settings-toggle">âš™ï¸</div></header>

<div id="settings">
<h4>âš™ï¸ ParamÃ¨tres</h4>
<label><input type="checkbox" id="darkToggle"> ğŸŒ™ Mode sombre</label>
<div class="vip-section">
<h4>â­ VIP</h4>
<button id="vip-btn">ğŸ’ Devenir VIP</button>
<button id="favorites-view">â¤ï¸ Favoris</button>
<button id="history-view">ğŸ•˜ Historique</button>
<label id="notif-label" style="display:none;">ğŸ”” <input type="checkbox" id="notif-best"> Notifications meilleurs articles</label>
<div id="fav-brands" style="display:none;margin-top:10px;">
<h4>ğŸ’– Marques favorites</h4>
<!-- 20 marques -->
<label><input type="checkbox" class="brand-check" value="Nike"> Nike ğŸ‘Ÿ</label>
<label><input type="checkbox" class="brand-check" value="Dior"> Dior âœ¨</label>
<label><input type="checkbox" class="brand-check" value="Levi's"> Levi's ğŸ‘–</label>
<label><input type="checkbox" class="brand-check" value="Zara"> Zara ğŸ§¥</label>
<label><input type="checkbox" class="brand-check" value="Adidas"> Adidas âš¡</label>
<label><input type="checkbox" class="brand-check" value="Ralph Lauren"> Ralph Lauren ğŸ</label>
<label><input type="checkbox" class="brand-check" value="Gucci"> Gucci ğŸ’</label>
<label><input type="checkbox" class="brand-check" value="Puma"> Puma ğŸ¾</label>
<label><input type="checkbox" class="brand-check" value="H&M"> H&M ğŸ‘•</label>
<label><input type="checkbox" class="brand-check" value="Louis Vuitton"> Louis Vuitton ğŸ‘œ</label>
<label><input type="checkbox" class="brand-check" value="Chanel"> Chanel ğŸ–¤</label>
<label><input type="checkbox" class="brand-check" value="Fendi"> Fendi ğŸ€</label>
<label><input type="checkbox" class="brand-check" value="Balenciaga"> Balenciaga ğŸ‘Ÿ</label>
<label><input type="checkbox" class="brand-check" value="Supreme"> Supreme ğŸ”¥</label>
<label><input type="checkbox" class="brand-check" value="Tommy Hilfiger"> Tommy Hilfiger ğŸ´</label>
<label><input type="checkbox" class="brand-check" value="New Balance"> New Balance ğŸƒâ€â™‚ï¸</label>
<label><input type="checkbox" class="brand-check" value="Vans"> Vans ğŸ‘Ÿ</label>
<label><input type="checkbox" class="brand-check" value="Reebok"> Reebok âš¡</label>
<label><input type="checkbox" class="brand-check" value="Carhartt"> Carhartt ğŸ› </label>
<label><input type="checkbox" class="brand-check" value="Patagonia"> Patagonia ğŸ”</label>
</div>
</div>
</div>

<button id="best-btn">â˜¹ Meilleurs articles</button>

<main>
<div class="card" id="card">
<img id="item-img" src="" alt="Article">
<div class="info">
<h2 id="item-title"></h2>
<p id="item-brand"></p>
<p id="item-size"></p>
<p id="item-condition"></p>
<div class="price" id="item-price"></div>
</div>
</div>
<div class="btns">
<button id="skip-btn">â­ Passer</button>
<button id="favorite-btn">â¤ï¸ Favoris</button>
<button id="vinted-btn">ğŸ› Voir sur Vinted</button>
</div>
</main>

<div id="vip-popup" class="popup"></div>
<div id="history-popup" class="popup"></div>
<div id="favorites-popup" class="popup"></div>
<div id="best-popup" class="popup"></div>

<script>
// Articles exemples
const items=[
{title:"Sweat Nike Tech", brand:"Nike", size:"M", condition:"TrÃ¨s bon Ã©tat", price:"45â‚¬", link:"https://www.vinted.fr", image:"https://cdn-icons-png.flaticon.com/512/925/925123.png"},
{title:"T-shirt Dior logo", brand:"Dior", size:"L", condition:"Neuf", price:"90â‚¬", link:"https://www.vinted.fr", image:"https://cdn-icons-png.flaticon.com/512/925/925123.png"},
{title:"Jean Levi's 501", brand:"Levi's", size:"42", condition:"Bon Ã©tat", price:"55â‚¬", link:"https://www.vinted.fr", image:"https://cdn-icons-png.flaticon.com/512/925/925123.png"},
{title:"Veste Zara beige", brand:"Zara", size:"S", condition:"TrÃ¨s bon Ã©tat", price:"35â‚¬", link:"https://www.vinted.fr", image:"https://cdn-icons-png.flaticon.com/512/925/925123.png"}
];

let index=0, isVIP=false, history=[], favorites=[], notifBest=false, bestArticles=[], favBrands=[];

// Affiche article
function showItem(){
  const item = items[index];
  if(isVIP && favBrands.length>0 && !favBrands.includes(item.brand)){ index=(index+1)%items.length; showItem(); return; }
  document.getElementById("item-img").src = item.image;
  document.getElementById("item-title").textContent = item.title;
  document.getElementById("item-brand").textContent = "Marque : " + item.brand;
  document.getElementById("item-size").textContent = "Taille : " + item.size;
  document.getElementById("item-condition").textContent = "Ã‰tat : " + item.condition;
  document.getElementById("item-price").textContent = item.price;
  document.getElementById("vinted-btn").onclick = ()=>window.open(item.link,"_blank");
  document.getElementById("favorite-btn").style.display = isVIP ? "inline-block" : "none";
  // Meilleurs articles
  const bestBtn = document.getElementById("best-btn");
  if(isVIP && bestArticles.length>0){ bestBtn.style.display="block"; } 
  else{ bestBtn.style.display="none"; bestBtn.textContent="â˜¹ Meilleurs articles"; bestBtn.style.animation="none";}
}

// VIP activation
document.getElementById("vip-btn").addEventListener("click", ()=>{
  isVIP=true;
  document.getElementById("vip-btn").textContent="â­ VIP Actif";
  document.getElementById("favorites-view").style.display="block";
  document.getElementById("history-view").style.display="block";
  document.getElementById("notif-label").style.display="block";
  document.getElementById("fav-brands").style.display="block";
  showItem();
});

// Skip
document.getElementById("skip-btn").addEventListener("click", ()=>{
  history.push(items[index]);
  if(isVIP && notifBest && Math.random()<0.5){ 
    bestArticles.push(items[index]);
    const bestBtn = document.getElementById("best-btn");
    bestBtn.textContent="â— Meilleurs articles";
    bestBtn.style.animation="blink 1s infinite";
    // Notification du navigateur
    if(Notification.permission==="granted"){
      new Notification("Vinted VIP", {body:`Nouvel article: ${items[index].title}`, icon:items[index].image});
    }
  }
  index=(index+1)%items.length;
  showItem();
});

// Favoris
document.getElementById("favorite-btn").addEventListener("click", ()=>{
  if(!favorites.includes(items[index])) favorites.push(items[index]);
  showItem();
});

// Popup historique
document.getElementById("history-view").addEventListener("click", ()=>{
  const popup = document.getElementById("history-popup");
  popup.innerHTML='<span class="popup-close">âœ–</span><h4>ğŸ•˜ Historique</h4><div class="item-list"></div>';
  const list = popup.querySelector(".item-list");
  history.slice(-3).forEach(it=>{
    const div=document.createElement("div");
    div.innerHTML=`<img src="${it.image}"/><div>${it.title}<br>${it.price}<br><button onclick="window.open('${it.link}','_blank')">Voir sur Vinted</button></div>`;
    list.appendChild(div);
  });
  popup.style.display="block";
  popup.querySelector(".popup-close").onclick=()=>popup.style.display="none";
});

// Popup favoris
document.getElementById("favorites-view").addEventListener("click", ()=>{
  const popup = document.getElementById("favorites-popup");
  popup.innerHTML='<span class="popup-close">âœ–</span><h4>â¤ï¸ Favoris</h4><div class="item-list"></div>';
  const list = popup.querySelector(".item-list");
  favorites.slice(-3).forEach(it=>{
    const div=document.createElement("div");
    div.innerHTML=`<img src="${it.image}"/><div>${it.title}<br>${it.price}<br><button onclick="window.open('${it.link}','_blank')">Voir sur Vinted</button></div>`;
    list.appendChild(div);
  });
  popup.style.display="block";
  popup.querySelector(".popup-close").onclick=()=>popup.style.display="none";
});

// Popup meilleurs articles
document.getElementById("best-btn").addEventListener("click", ()=>{
  if(bestArticles.length===0){ alert("ğŸ˜” Pas de meilleurs articles"); return; }
  const popup = document.getElementById("best-popup");
  popup.innerHTML='<span class="popup-close">âœ–</span><h4>â— Meilleurs articles</h4><div class="item-list"></div>';
  const list = popup.querySelector(".item-list");
  bestArticles.slice(-3).forEach(it=>{
    const div=document.createElement("div");
    div.innerHTML=`<img src="${it.image}"/><div>${it.title}<br>${it.price}<br><button onclick="window.open('${it.link}','_blank')">Voir sur Vinted</button></div>`;
    list.appendChild(div);
  });
  popup.style.display="block";
  popup.querySelector(".popup-close").onclick=()=>{
    popup.style.display="none";
    const bestBtn = document.getElementById("best-btn");
    bestBtn.textContent="â˜¹ Meilleurs articles";
    bestBtn.style.animation="none";
  };
});

// Dark mode
document.getElementById("darkToggle").addEventListener("change", ()=>document.body.classList.toggle("dark-mode"));

// Settings toggle
document.getElementById("settings-toggle").addEventListener("click", ()=>{
  const s=document.getElementById("settings"); s.style.display=(s.style.display==="block"?"none":"block");
});

// Marques favorites filter
document.querySelectorAll(".brand-check").forEach(cb=>{
  cb.addEventListener("change", ()=>{
    favBrands = Array.from(document.querySelectorAll(".brand-check")).filter(b=>b.checked).map(b=>b.value);
    showItem();
  });
});

// Notification checkbox
document.getElementById("notif-best").addEventListener("change", ()=>{
  notifBest = document.getElementById("notif-best").checked;
});

// Demande autorisation notification
if("Notification" in window && Notification.permission!=="granted"){
  Notification.requestPermission();
}

showItem();
</script>
</body>
</html>
