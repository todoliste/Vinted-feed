<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vinted Feed - VIP Demo</title>
<style>
body {
  margin: 0;
  font-family: "Poppins", sans-serif;
  background: #f5f5f5;
  color: #333;
  display: flex;
  flex-direction: column;
  align-items: center;
  transition: background 0.3s, color 0.3s;
  min-height: 100vh;
}
.dark-mode { background: #121212; color: #f1f1f1; }

header {
  position: fixed;
  top: 0;
  width: 100%;
  height: 60px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0 16px;
  background: rgba(255,255,255,0.8);
  backdrop-filter: blur(8px);
  box-shadow: 0 1px 5px rgba(0,0,0,0.05);
  z-index: 100;
}
.dark-mode header { background: rgba(25,25,25,0.8); }

.logo { display: flex; align-items: center; font-weight: 600; font-size: 1rem; gap: 8px; cursor:pointer; }

#settings {
  position: fixed;
  top: 70px;
  right: 10px;
  background: #fff;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.2);
  padding: 12px;
  width: 280px;
  display: none;
  z-index: 99;
}
.dark-mode #settings { background: #1f1f1f; color: #fff; }

#settings h4 { margin:0 0 6px 0; }
#settings label { display:block; margin-top:8px; font-size:0.9em; }
#settings input[type="checkbox"] { margin-right:6px; }

.vip-section button { margin-top:6px; width:100%; padding:8px; border-radius:8px; border:none; cursor:pointer; font-weight:600; }
.vip-section button#vip-btn { background: linear-gradient(90deg, gold, orange); color:#fff; }
.vip-section button#favorites-view, .vip-section button#history-view { background:#2f80ed; color:#fff; display:none; }

main {
  margin-top:70px;
  width:90%;
  max-width:800px;
  display:flex;
  flex-direction:column;
  align-items:center;
}
.card {
  display:flex;
  flex-direction:column;
  width:100%;
  background:#fff;
  border-radius:16px;
  box-shadow:0 6px 18px rgba(0,0,0,0.08);
  overflow:hidden;
  position:relative;
  transition: transform 0.5s ease, opacity 0.4s ease;
}
.dark-mode .card { background:#1f1f1f; }
.card img { width:100%; object-fit:contain; background:#f9f9f9; }
.card .info { padding:12px; display:flex; flex-direction:column; }
.info h2 { font-size:1.2rem; margin:4px 0; }
.info p { font-size:0.95rem; margin:2px 0; }
.price { color:#2f80ed; font-weight:600; margin-top:6px; }

.btns {
  display:flex;
  justify-content:center;
  gap:10px;
  margin-top:12px;
  flex-wrap: wrap;
}
button { cursor:pointer; padding:10px 20px; border:none; border-radius:10px; font-weight:600; transition:0.2s; }
button:hover { opacity:0.9; transform:scale(1.03); }
#skip-btn { background:#666; color:#fff; }
#favorite-btn { background:#e74c3c; color:#fff; }
#vinted-btn { background:#27ae60; color:white; }

.popup {
  position:fixed;
  background:#fff;
  padding:12px;
  border-radius:12px;
  box-shadow:0 4px 12px rgba(0,0,0,0.2);
  width:80%; max-width:400px;
  display:none;
  max-height:70%;
  overflow-y:auto;
  z-index:200;
}
.dark-mode .popup { background:#1f1f1f; color:#fff; }
.popup .popup-close { position:absolute; top:6px; right:8px; cursor:pointer; font-weight:bold; font-size:1.2rem; }

.item-list div { display:flex; gap:10px; margin-bottom:8px; align-items:center; }
.item-list img { width:50px; height:50px; object-fit:cover; border-radius:6px; }

#best-btn{
  position: fixed;
  top: 10px;
  left: 10px;
  z-index: 101;
  padding: 8px 12px;
  border-radius: 8px;
  border: none;
  font-weight: bold;
  cursor: pointer;
  background:#2f80ed;
  color:white;
}
#best-btn:hover { opacity: 0.9; transform: scale(1.05); }

.card.slide-left { transform: translateX(-120%) rotate(-10deg) scale(0.9); opacity:0; }
.card.zoom-in { transform: scale(1.05); opacity:1; transition: transform 0.5s ease, opacity 0.4s ease; }

@media(max-width:700px){
  main { width:95%; }
  .card { flex-direction:column; height:auto; }
  .card img { width:100%; height:auto; }
  .card .info { width:100%; padding:12px; }
  .btns { flex-direction:row; justify-content:center; flex-wrap:nowrap; }
  #settings { width:90%; top:70px; right:5%; }
}
</style>
</head>
<body>

<header>
  <div class="logo" id="discord-logo">ğŸ¯ ParamÃ¨tres</div>
</header>

<div id="settings">
  <h4>âš™ï¸ ParamÃ¨tres</h4>
  <label><input type="checkbox" id="darkToggle"> ğŸŒ™ Mode sombre</label>
  <div class="vip-section">
    <h4>â­ VIP</h4>
    <button id="vip-btn">ğŸ’ Devenir VIP</button>
    <button id="favorites-view">â¤ï¸ Voir mes favoris</button>
    <button id="history-view">ğŸ•˜ Voir historique</button>
    <label id="notif-label" style="display:none;">
      ğŸ”” <input type="checkbox" id="notif-best"> Notifications meilleurs articles
    </label>
    <div id="fav-brands" style="display:none; margin-top:10px;">
      <h4>ğŸ’– Marques favorites</h4>
      <!-- Plus de 20 marques -->
      <label><input type="checkbox" class="brand-check" value="Nike"> Nike ğŸ‘Ÿ</label>
      <label><input type="checkbox" class="brand-check" value="Dior"> Dior âœ¨</label>
      <label><input type="checkbox" class="brand-check" value="Levi's"> Levi's ğŸ‘–</label>
      <label><input type="checkbox" class="brand-check" value="Zara"> Zara ğŸ§¥</label>
      <label><input type="checkbox" class="brand-check" value="Adidas"> Adidas âš¡</label>
      <label><input type="checkbox" class="brand-check" value="Ralph Lauren"> Ralph Lauren ğŸ</label>
      <label><input type="checkbox" class="brand-check" value="Gucci"> Gucci ğŸ’</label>
      <label><input type="checkbox" class="brand-check" value="Puma"> Puma ğŸ¾</label>
      <label><input type="checkbox" class="brand-check" value="H&M"> H&M ğŸ‘•</label>
      <label><input type="checkbox" class="brand-check" value="Louis Vuitton"> Louis Vuitton ğŸ‘œ</label>
      <label><input type="checkbox" class="brand-check" value="Chanel"> Chanel ğŸ–¤</label>
      <label><input type="checkbox" class="brand-check" value="Fendi"> Fendi ğŸ€</label>
      <label><input type="checkbox" class="brand-check" value="Balenciaga"> Balenciaga ğŸ‘Ÿ</label>
      <label><input type="checkbox" class="brand-check" value="Supreme"> Supreme ğŸ”¥</label>
      <label><input type="checkbox" class="brand-check" value="Tommy Hilfiger"> Tommy Hilfiger ğŸ´</label>
      <label><input type="checkbox" class="brand-check" value="New Balance"> New Balance ğŸƒâ€â™‚ï¸</label>
      <label><input type="checkbox" class="brand-check" value="Vans"> Vans ğŸ‘Ÿ</label>
      <label><input type="checkbox" class="brand-check" value="Reebok"> Reebok âš¡</label>
      <label><input type="checkbox" class="brand-check" value="Carhartt"> Carhartt ğŸ› </label>
    </div>
  </div>
</div>

<button id="best-btn">â˜¹ Meilleurs articles</button>

<main>
  <div class="card" id="card">
    <img id="item-img" src="" alt="Article">
    <div class="info">
      <h2 id="item-title"></h2>
      <p id="item-brand"></p>
      <p id="item-size"></p>
      <p id="item-condition"></p>
      <div class="price" id="item-price"></div>
    </div>
  </div>
  <div class="btns">
    <button id="skip-btn">â­ Passer</button>
    <button id="favorite-btn">â¤ï¸ Favoris</button>
    <button id="vinted-btn">ğŸ› Voir sur Vinted</button>
  </div>
</main>

<div id="vip-popup" class="popup"></div>
<div id="history-popup" class="popup"></div>
<div id="favorites-popup" class="popup"></div>
<div id="best-popup" class="popup"></div>

<script>
// === ARTICLES ===
const items=[
{title:"Sweat Nike Tech",brand:"Nike",size:"M",condition:"TrÃ¨s bon Ã©tat",price:"45â‚¬",link:"#",image:"https://cdn-icons-png.flaticon.com/512/925/925123.png"},
{title:"T-shirt Dior logo",brand:"Dior",size:"L",condition:"Neuf",price:"90â‚¬",link:"#",image:"https://cdn-icons-png.flaticon.com/512/925/925123.png"},
{title:"Jean Levi's 501",brand:"Levi's",size:"42",condition:"Bon Ã©tat",price:"55â‚¬",link:"#",image:"https://cdn-icons-png.flaticon.com/512/925/925123.png"},
{title:"Veste Zara beige",brand:"Zara",size:"S",condition:"TrÃ¨s bon Ã©tat",price:"35â‚¬",link:"#",image:"https://cdn-icons-png.flaticon.com/512/925/925123.png"},
{title:"T-shirt Adidas Originals",brand:"Adidas",size:"L",condition:"Neuf",price:"50â‚¬",link:"#",image:"https://cdn-icons-png.flaticon.com/512/925/925123.png"},
{title:"Polo Ralph Lauren",brand:"Ralph Lauren",size:"M",condition:"Bon Ã©tat",price:"70â‚¬",link:"#",image:"https://cdn-icons-png.flaticon.com/512/925/925123.png"},
{title:"Sweat Gucci",brand:"Gucci",size:"L",condition:"TrÃ¨s bon Ã©tat",price:"120â‚¬",link:"#",image:"https://cdn-icons-png.flaticon.com/512/925/925123.png"},
{title:"Chaussures Puma",brand:"Puma",size:"42",condition:"Neuf",price:"60â‚¬",link:"#",image:"https://cdn-icons-png.flaticon.com/512/925/925123.png"},
{title:"Chemise H&M",brand:"H&M",size:"M",condition:"Neuf",price:"25â‚¬",link:"#",image:"https://cdn-icons-png.flaticon.com/512/925/925123.png"},
{title:"Sac Louis Vuitton",brand:"Louis Vuitton",size:"Unique",condition:"TrÃ¨s bon Ã©tat",price:"350â‚¬",link:"#",image:"https://cdn-icons-png.flaticon.com/512/925/925123.png"},
// ... ajoute encore 10-15 articles ici pour atteindre 20+
];

let index=0, isVIP=false, history=[], favorites=[], notifBest=false, bestArticles=[], favBrands=[];

function showItem(){
  const item = items[index];
  if(isVIP && favBrands.length>0 && !favBrands.includes(item.brand)){
    index=(index+1)%items.length; showItem(); return;
  }
  document.getElementById("item-img").src=item.image;
  document.getElementById("item-title").textContent="ğŸ›’ "+item.title;
  document.getElementById("item-brand").textContent="ğŸ· Marque : "+item.brand;
  document.getElementById("item-size").textContent="ğŸ“ Taille : "+item.size;
  document.getElementById("item-condition").textContent="ğŸ”¹ Ã‰tat : "+item.condition;
  document.getElementById("item-price").textContent="ğŸ’° "+item.price;
  document.getElementById("vinted-btn").onclick=()=>window.open(item.link,"_blank");
  document.getElementById("favorite-btn").style.display=isVIP?"inline-block":"none";
}
showItem();

// === SKIP ===
const card = document.getElementById("card");
document.getElementById("skip-btn").addEventListener("click",()=>{
  card.classList.add("slide-left");
  setTimeout(()=>{
    history.push(items[index]);
    index=(index+1)%items.length;
    showItem();
    card.classList.remove("slide-left"); card.classList.add("zoom-in");
    setTimeout(()=>card.classList.remove("zoom-in"),500);
    if(isVIP && notifBest && Math.random()<0.5) addBest(items[index]);
  },400);
});

// === FAVORIS ===
document.getElementById("favorite-btn").addEventListener("click",()=>{
  const item=items[index]; if(!favorites.includes(item)) favorites.push(item);
});

// === PARAMETRES ===
document.getElementById("discord-logo").addEventListener("click",()=>{
  const settings=document.getElementById("settings");
  settings.style.display=(settings.style.display==="block"?"none":"block");
});
document.getElementById("darkToggle").addEventListener("change",()=>{document.body.classList.toggle("dark-mode");});

// === VIP ===
const vipBtn=document.getElementById("vip-btn");
const vipPopup=document.getElementById("vip-popup");
const favoritesView=document.getElementById("favorites-view");
const historyView=document.getElementById("history-view");
const historyPopup=document.getElementById("history-popup");
const favoritesPopup=document.getElementById("favorites-popup");
const notifCheckbox=document.getElementById("notif-best");
const notifLabel=document.getElementById("notif-label");
const favBrandsDiv=document.getElementById("fav-brands");
const brandChecks=document.querySelectorAll(".brand-check");
const bestBtn=document.getElementById("best-btn");
const bestPopup=document.getElementById("best-popup");

vipBtn.addEventListener("click",()=>{
  vipPopup.innerHTML='âœ–<span class="popup-close">âœ–</span><h4>ğŸ’ Devenir VIP - 4,99â‚¬/mois</h4><ul><li>0 Delay âš¡</li><li>Notifications meilleurs articles ğŸ””</li><li>Historique complet ğŸ•˜</li><li>Favoris sur les articles â¤ï¸</li><li>Marques prÃ©fÃ©rÃ©es filtrables ğŸ’–</li></ul><button id="pay-vip">Payer VIP</button>';
  vipPopup.style.display="block";
  vipPopup.querySelector(".popup-close").onclick=()=>vipPopup.style.display="none";
  document.getElementById("pay-vip").onclick=()=>{
    isVIP=true; vipPopup.style.display="none"; vipBtn.textContent="â­ VIP Actif";
    document.getElementById("favorite-btn").style.display="inline-block";
    favoritesView.style.display="block"; historyView.style.display="block";
    notifLabel.style.display="block"; favBrandsDiv.style.display="block"; updateBestButton();
  }
});

brandChecks.forEach(cb=>{
  cb.addEventListener("change", ()=>{
    favBrands = Array.from(brandChecks).filter(b=>b.checked).map(b=>b.value);
    showItem();
  });
});

// === POPUP HISTO/FAV ===
function openPopup(popup, arr, title){
  if(!isVIP) return;
  popup.innerHTML=`<span class="popup-close">âœ–</span><h4>${title}</h4><div class="item-list"></div><button id="clear-all">Tout supprimer</button>`;
  const list = popup.querySelector(".item-list");
  arr.forEach((it,i)=>{
    const div=document.createElement("div");
    div.innerHTML=`<img src="${it.image}" /><div>${it.title}<br>${it.price}<br>
    <button onclick="window.open('${it.link}','_blank')">ğŸ› Voir sur Vinted</button>
    <button data-i="${i}" class="del-item">Supprimer</button></div>`;
    list.appendChild(div);
  });
  popup.style.display="block";
  popup.querySelector(".popup-close
